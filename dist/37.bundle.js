(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{125:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/antd/es/button/style/css.js\nvar css = __webpack_require__(140);\n\n// EXTERNAL MODULE: ./node_modules/antd/es/button/index.js\nvar es_button = __webpack_require__(60);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/slicedToArray.js\nvar slicedToArray = __webpack_require__(79);\nvar slicedToArray_default = /*#__PURE__*/__webpack_require__.n(slicedToArray);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(0);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/helpers/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(448);\nvar asyncToGenerator_default = /*#__PURE__*/__webpack_require__.n(asyncToGenerator);\n\n// EXTERNAL MODULE: ./node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(449);\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ./node_modules/whatwg-fetch/fetch.js\nvar fetch = __webpack_require__(821);\n\n// CONCATENATED MODULE: ./src/utils/request.ts\n\n\n\n\n/* harmony default export */ var request = (function (_x) {\n  return _ref2.apply(this, arguments);\n});\n\nfunction _ref2() {\n  _ref2 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default.a.mark(function _callee(_ref) {\n    var url, _ref$method, method, _ref$data, data, _ref$headers, headers, requestConfig, dataStr, _i, _Object$entries, _Object$entries$_i, k, v, response, result;\n\n    return regenerator_default.a.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            url = _ref.url, _ref$method = _ref.method, method = _ref$method === void 0 ? \'get\' : _ref$method, _ref$data = _ref.data, data = _ref$data === void 0 ? {} : _ref$data, _ref$headers = _ref.headers, headers = _ref$headers === void 0 ? {\n              \'Content-Type\': \'application/json\'\n            } : _ref$headers;\n            console.log(\'执行了fetch\');\n            requestConfig = {\n              method: method,\n              headers: {\n                Accept: \'application/json\'\n              }\n            };\n\n            if (method === \'post\') {\n              Object.defineProperty(requestConfig, \'body\', {\n                value: JSON.stringify(data)\n              });\n            } else {\n              dataStr = \'\';\n\n              for (_i = 0, _Object$entries = Object.entries(data); _i < _Object$entries.length; _i++) {\n                _Object$entries$_i = slicedToArray_default()(_Object$entries[_i], 2), k = _Object$entries$_i[0], v = _Object$entries$_i[1];\n                dataStr += "".concat(k, "=").concat(v, "&");\n              }\n\n              if (dataStr !== \'\') {\n                url = url + \'?\' + dataStr.substr(0, dataStr.lastIndexOf(\'&\'));\n              }\n            } // header\n\n\n            if (Object.keys(headers).length !== 0) {\n              Object.assign(requestConfig.headers, headers);\n            }\n\n            _context.next = 7;\n            return Object(fetch["a" /* fetch */])(url, requestConfig);\n\n          case 7:\n            response = _context.sent;\n            _context.next = 10;\n            return response.json();\n\n          case 10:\n            result = _context.sent;\n            return _context.abrupt("return", result);\n\n          case 12:\n          case "end":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _ref2.apply(this, arguments);\n}\n// EXTERNAL MODULE: ./node_modules/swr/dist/index.esm.js\nvar index_esm = __webpack_require__(619);\n\n// CONCATENATED MODULE: ./src/hooks/test.ts\n\n\nfunction useTestApi() {\n  var _useSWR = Object(index_esm["a" /* default */])({\n    url: \'/test\'\n  }, request, {\n    revalidateOnFocus: true,\n    //窗口聚焦时自动重新验证\n    revalidateIfStale: true //即使存在陈旧数据，也自动重新验证\n\n  }),\n      data = _useSWR.data,\n      error = _useSWR.error;\n\n  return {\n    data: data,\n    error: error\n  };\n}\n// CONCATENATED MODULE: ./src/container/page4/SwrHook/index.tsx\n\n\n\n\n\n\n\n\nvar SwrHook_SwrHook = function SwrHook(props) {\n  var _useTestApi = useTestApi(),\n      data = _useTestApi.data,\n      error = _useTestApi.error;\n\n  var _useSWR = Object(index_esm["a" /* default */])(\'/test\', function (url) {\n    return request({\n      url: url\n    });\n  }),\n      data2 = _useSWR.data,\n      error2 = _useSWR.error;\n\n  var _useState = Object(react["useState"])({}),\n      _useState2 = slicedToArray_default()(_useState, 2),\n      forceUpdate = _useState2[1];\n\n  console.log(\'render\', data2 === null || data2 === void 0 ? void 0 : data2.result);\n  return /*#__PURE__*/react_default.a.createElement("div", null, /*#__PURE__*/react_default.a.createElement("h1", null, "name:", data === null || data === void 0 ? void 0 : data.result.name), /*#__PURE__*/react_default.a.createElement(es_button["a" /* default */], {\n    type: "primary",\n    onClick: function onClick() {\n      forceUpdate({});\n    }\n  }, "forceUpdate"), /*#__PURE__*/react_default.a.createElement("hr", null));\n};\n\n/* harmony default export */ var page4_SwrHook = __webpack_exports__["default"] = (SwrHook_SwrHook);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTI1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3V0aWxzL3JlcXVlc3QudHM/YjMyZCIsIndlYnBhY2s6Ly8vLi9zcmMvaG9va3MvdGVzdC50cz80ODk0Iiwid2VicGFjazovLy8uL3NyYy9jb250YWluZXIvcGFnZTQvU3dySG9vay9pbmRleC50c3g/NTJkMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmZXRjaCB9IGZyb20gJ3doYXR3Zy1mZXRjaCc7XG5leHBvcnQgdHlwZSBGZXRjaE9wdGlvbnMgPSB7XG4gIHVybDogc3RyaW5nO1xuICBtZXRob2Q/OiBzdHJpbmc7XG4gIGRhdGE/OiBhbnk7XG4gIGhlYWRlcnM/OiBhbnk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiAoe1xuICB1cmwsXG4gIG1ldGhvZCA9ICdnZXQnLFxuICBkYXRhID0ge30sXG4gIGhlYWRlcnMgPSB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbn06IEZldGNoT3B0aW9ucykge1xuICBjb25zb2xlLmxvZygn5omn6KGM5LqGZmV0Y2gnKTtcblxuICBsZXQgcmVxdWVzdENvbmZpZyA9IHtcbiAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICBoZWFkZXJzOiB7XG4gICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICB9LFxuICB9O1xuXG4gIGlmIChtZXRob2QgPT09ICdwb3N0Jykge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyZXF1ZXN0Q29uZmlnLCAnYm9keScsIHtcbiAgICAgIHZhbHVlOiBKU09OLnN0cmluZ2lmeShkYXRhKSxcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBsZXQgZGF0YVN0ciA9ICcnO1xuICAgIGZvciAobGV0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhkYXRhKSkge1xuICAgICAgZGF0YVN0ciArPSBgJHtrfT0ke3Z9JmA7XG4gICAgfVxuXG4gICAgaWYgKGRhdGFTdHIgIT09ICcnKSB7XG4gICAgICB1cmwgPSB1cmwgKyAnPycgKyBkYXRhU3RyLnN1YnN0cigwLCBkYXRhU3RyLmxhc3RJbmRleE9mKCcmJykpO1xuICAgIH1cbiAgfVxuXG4gIC8vIGhlYWRlclxuICBpZiAoT2JqZWN0LmtleXMoaGVhZGVycykubGVuZ3RoICE9PSAwKSB7XG4gICAgT2JqZWN0LmFzc2lnbihyZXF1ZXN0Q29uZmlnLmhlYWRlcnMsIGhlYWRlcnMpO1xuICB9XG5cbiAgbGV0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCByZXF1ZXN0Q29uZmlnKTtcbiAgbGV0IHJlc3VsdCA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuIiwiaW1wb3J0IGZldGNoIGZyb20gJ0AvdXRpbHMvcmVxdWVzdCc7XG5pbXBvcnQgdXNlU1dSIGZyb20gJ3N3cic7XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VUZXN0QXBpKCkge1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSB1c2VTV1IoXG4gICAge1xuICAgICAgdXJsOiAnL3Rlc3QnLFxuICAgIH0sXG4gICAgZmV0Y2gsXG4gICAge1xuICAgICAgcmV2YWxpZGF0ZU9uRm9jdXM6IHRydWUsIC8v56qX5Y+j6IGa54Sm5pe26Ieq5Yqo6YeN5paw6aqM6K+BXG4gICAgICByZXZhbGlkYXRlSWZTdGFsZTogdHJ1ZSwgLy/ljbPkvb/lrZjlnKjpmYjml6fmlbDmja7vvIzkuZ/oh6rliqjph43mlrDpqozor4FcbiAgICB9XG4gICk7XG5cbiAgcmV0dXJuIHtcbiAgICBkYXRhLFxuICAgIGVycm9yLFxuICB9O1xufVxuIiwiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlVGVzdEFwaSB9IGZyb20gJ0AvaG9va3MvdGVzdCc7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tICdhbnRkJztcbmltcG9ydCB1c2VTV1IsIHsgU1dSQ29uZmlnIH0gZnJvbSAnc3dyJztcbmltcG9ydCBmZXRjaCBmcm9tICdAL3V0aWxzL3JlcXVlc3QnO1xuXG5jb25zdCBTd3JIb29rID0gKHByb3BzOiBhbnkpID0+IHtcbiAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gdXNlVGVzdEFwaSgpO1xuICBjb25zdCB7IGRhdGE6IGRhdGEyLCBlcnJvcjogZXJyb3IyIH0gPSB1c2VTV1IoJy90ZXN0JywgdXJsID0+IHtcbiAgICByZXR1cm4gZmV0Y2goe1xuICAgICAgdXJsOiB1cmwsXG4gICAgfSk7XG4gIH0pO1xuXG4gIGNvbnN0IFssIGZvcmNlVXBkYXRlXSA9IHVzZVN0YXRlKHt9KTtcblxuICBjb25zb2xlLmxvZygncmVuZGVyJywgZGF0YTI/LnJlc3VsdCk7XG4gIHJldHVybiAoXG4gICAgPGRpdj5cbiAgICAgIDxoMT5uYW1lOntkYXRhPy5yZXN1bHQubmFtZX08L2gxPlxuICAgICAgPEJ1dHRvblxuICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICBmb3JjZVVwZGF0ZSh7fSk7XG4gICAgICAgIH19XG4gICAgICA+XG4gICAgICAgIGZvcmNlVXBkYXRlXG4gICAgICA8L0J1dHRvbj5cblxuICAgICAgPGhyIC8+XG4gICAgICB7LyogPENvbXBBIC8+ICovfVxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgU3dySG9vaztcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQVFBO0FBQUE7QUFBQTtBQUNBOztBQURBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFHQTtBQUFBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBRkE7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBbENBO0FBQUE7QUFDQTtBQURBO0FBbUNBO0FBbkNBO0FBQUE7QUFDQTtBQURBO0FBb0NBO0FBcENBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7Ozs7OztBQ1JBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFEQTtBQUtBO0FBQUE7QUFDQTtBQUNBO0FBSEE7QUFMQTtBQUFBO0FBQ0E7QUFVQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7OztBQ25CQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFKQTtBQUFBO0FBQ0E7QUFLQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBYUE7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///125\n')}}]);