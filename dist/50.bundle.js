(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{189:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(79);\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(0);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_dnd__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(824);\n/* harmony import */ var react_dnd__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(843);\n\n\n\n\nvar Card = function Card(props) {\n  var bg = props.bg,\n      category = props.category,\n      index = props.index,\n      moveCard = props.moveCard,\n      id = props.id;\n  var ref = Object(react__WEBPACK_IMPORTED_MODULE_1__["useRef"])(null);\n\n  var _useDrag = Object(react_dnd__WEBPACK_IMPORTED_MODULE_2__[/* useDrag */ "a"])({\n    type: \'Card\',\n    collect: function collect(monitor) {\n      return {\n        isDragging: monitor.isDragging()\n      };\n    },\n    //item 中包含index属性,则在drop组件 hover和drop是可以根军第一天各参数获取index的值\n    item: {\n      index: index\n    }\n  }),\n      _useDrag2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useDrag, 3),\n      isDragging = _useDrag2[0].isDragging,\n      dragRef = _useDrag2[1],\n      dragPreview = _useDrag2[2];\n\n  var _useDrop = Object(react_dnd__WEBPACK_IMPORTED_MODULE_3__[/* useDrop */ "a"])({\n    accept: \'Card\',\n    hover: function hover(item, monitor) {\n      if (!ref.current) {\n        return;\n      }\n\n      var dragIndex = item.index;\n      var hoverIndex = index; // 拖拽元素下标与鼠标悬浮元素下标一致时，不进行操作\n\n      if (dragIndex === hoverIndex) {\n        return;\n      } // 确定屏幕上矩形范围\n\n\n      var hoverBoundingRect = ref.current.getBoundingClientRect(); // 获取中点垂直坐标\n\n      var hoverMiddleY = (hoverBoundingRect.bottom - hoverBoundingRect.top) / 2; // 确定鼠标位置\n\n      var clientOffset = monitor.getClientOffset(); // 获取距顶部距离\n\n      var hoverClientY = clientOffset.y - hoverBoundingRect.top;\n      /**\n       * 只在鼠标越过一半物品高度时执行移动。\n       *\n       * 当向下拖动时，仅当光标低于50%时才移动。\n       * 当向上拖动时，仅当光标在50%以上时才移动。\n       *\n       * 可以防止鼠标位于元素一半高度时元素抖动的状况\n       */\n      // 向下拖动\n\n      if (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\n        return;\n      } // 向上拖动\n\n\n      if (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\n        return;\n      } // 执行 move 回调函数\n\n\n      moveCard(dragIndex, hoverIndex);\n      /**\n       * 如果拖拽的组件为 Box，则 dragIndex 为 undefined，此时不对 item 的 index 进行修改\n       * 如果拖拽的组件为 Card，则将 hoverIndex 赋值给 item 的 index 属性\n       */\n\n      if (item.index !== undefined) {\n        item.index = hoverIndex;\n      }\n    }\n  }),\n      _useDrop2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_0___default()(_useDrop, 2),\n      dropRef = _useDrop2[1];\n  /**\n   * 使用 drag 和 drop 对 ref 进行包裹，则组件既可以进行拖拽也可以接收拖拽组件\n   * 使用 dragPreview 包裹组件，可以实现拖动时预览该组件的效果\n   */\n\n\n  dragPreview(dropRef(ref));\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", {\n    ref: ref,\n    style: {\n      position: \'relative\',\n      background: bg,\n      margin: \'16px 6px\',\n      // Card 为占位元素是，透明度 0.4，拖拽状态时透明度 0.2，正常情况透明度为 1\n      opacity: id === -1 ? 0.4 : isDragging ? 0.2 : 1,\n      padding: \'20px 0px\',\n      verticalAlign: 40,\n      width: 288,\n      cursor: \'move\'\n    }\n  }, id !== -1 && dragRef && dragRef( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("div", null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_1___default.a.createElement("b", null, "\\u9009\\u9879:"), category)));\n};\n\n/* harmony default export */ __webpack_exports__["default"] = (Card);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTg5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2NvbnRhaW5lci9wYWdlMy9yZWFjdC1kbmQvQ2FyZC50c3g/ZDZmZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgRHJhZ1NvdXJjZU1vbml0b3IsIERyb3BUYXJnZXRNb25pdG9yLCB1c2VEcmFnLCB1c2VEcm9wIH0gZnJvbSAncmVhY3QtZG5kJztcblxuY29uc3QgQ2FyZCA9IChwcm9wczogYW55KSA9PiB7XG4gIGNvbnN0IHsgYmcsIGNhdGVnb3J5LCBpbmRleCwgbW92ZUNhcmQsIGlkIH0gPSBwcm9wcztcbiAgY29uc3QgcmVmID0gdXNlUmVmKG51bGwpO1xuXG4gIGNvbnN0IFt7IGlzRHJhZ2dpbmcgfSwgZHJhZ1JlZiwgZHJhZ1ByZXZpZXddID0gdXNlRHJhZyh7XG4gICAgdHlwZTogJ0NhcmQnLFxuICAgIGNvbGxlY3Q6IChtb25pdG9yOiBEcmFnU291cmNlTW9uaXRvcikgPT4gKHtcbiAgICAgIGlzRHJhZ2dpbmc6IG1vbml0b3IuaXNEcmFnZ2luZygpLFxuICAgIH0pLFxuICAgIC8vaXRlbSDkuK3ljIXlkKtpbmRleOWxnuaApyzliJnlnKhkcm9w57uE5Lu2IGhvdmVy5ZKMZHJvcOaYr+WPr+S7peagueWGm+esrOS4gOWkqeWQhOWPguaVsOiOt+WPlmluZGV455qE5YC8XG5cbiAgICBpdGVtOiB7IGluZGV4IH0sXG4gIH0pO1xuXG4gIGNvbnN0IFssIGRyb3BSZWZdID0gdXNlRHJvcCh7XG4gICAgYWNjZXB0OiAnQ2FyZCcsXG4gICAgaG92ZXIoaXRlbTogYW55LCBtb25pdG9yOiBEcm9wVGFyZ2V0TW9uaXRvcikge1xuICAgICAgaWYgKCFyZWYuY3VycmVudCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCBkcmFnSW5kZXggPSBpdGVtLmluZGV4O1xuICAgICAgY29uc3QgaG92ZXJJbmRleCA9IGluZGV4O1xuXG4gICAgICAvLyDmi5bmi73lhYPntKDkuIvmoIfkuI7pvKDmoIfmgqzmta7lhYPntKDkuIvmoIfkuIDoh7Tml7bvvIzkuI3ov5vooYzmk43kvZxcbiAgICAgIGlmIChkcmFnSW5kZXggPT09IGhvdmVySW5kZXgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyDnoa7lrprlsY/luZXkuIrnn6nlvaLojIPlm7RcbiAgICAgIGNvbnN0IGhvdmVyQm91bmRpbmdSZWN0ID0gcmVmLmN1cnJlbnQhLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAvLyDojrflj5bkuK3ngrnlnoLnm7TlnZDmoIdcbiAgICAgIGNvbnN0IGhvdmVyTWlkZGxlWSA9IChob3ZlckJvdW5kaW5nUmVjdC5ib3R0b20gLSBob3ZlckJvdW5kaW5nUmVjdC50b3ApIC8gMjtcblxuICAgICAgLy8g56Gu5a6a6byg5qCH5L2N572uXG4gICAgICBjb25zdCBjbGllbnRPZmZzZXQgPSBtb25pdG9yLmdldENsaWVudE9mZnNldCgpO1xuXG4gICAgICAvLyDojrflj5bot53pobbpg6jot53nprtcbiAgICAgIGNvbnN0IGhvdmVyQ2xpZW50WSA9IChjbGllbnRPZmZzZXQgYXMgWFlDb29yZCkueSAtIGhvdmVyQm91bmRpbmdSZWN0LnRvcDtcblxuICAgICAgLyoqXG4gICAgICAgKiDlj6rlnKjpvKDmoIfotorov4fkuIDljYrnianlk4Hpq5jluqbml7bmiafooYznp7vliqjjgIJcbiAgICAgICAqXG4gICAgICAgKiDlvZPlkJHkuIvmi5bliqjml7bvvIzku4XlvZPlhYnmoIfkvY7kuo41MCXml7bmiY3np7vliqjjgIJcbiAgICAgICAqIOW9k+WQkeS4iuaLluWKqOaXtu+8jOS7heW9k+WFieagh+WcqDUwJeS7peS4iuaXtuaJjeenu+WKqOOAglxuICAgICAgICpcbiAgICAgICAqIOWPr+S7pemYsuatoum8oOagh+S9jeS6juWFg+e0oOS4gOWNiumrmOW6puaXtuWFg+e0oOaKluWKqOeahOeKtuWGtVxuICAgICAgICovXG5cbiAgICAgIC8vIOWQkeS4i+aLluWKqFxuICAgICAgaWYgKGRyYWdJbmRleCA8IGhvdmVySW5kZXggJiYgaG92ZXJDbGllbnRZIDwgaG92ZXJNaWRkbGVZKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8g5ZCR5LiK5ouW5YqoXG4gICAgICBpZiAoZHJhZ0luZGV4ID4gaG92ZXJJbmRleCAmJiBob3ZlckNsaWVudFkgPiBob3Zlck1pZGRsZVkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyDmiafooYwgbW92ZSDlm57osIPlh73mlbBcbiAgICAgIG1vdmVDYXJkKGRyYWdJbmRleCwgaG92ZXJJbmRleCk7XG5cbiAgICAgIC8qKlxuICAgICAgICog5aaC5p6c5ouW5ou955qE57uE5Lu25Li6IEJveO+8jOWImSBkcmFnSW5kZXgg5Li6IHVuZGVmaW5lZO+8jOatpOaXtuS4jeWvuSBpdGVtIOeahCBpbmRleCDov5vooYzkv67mlLlcbiAgICAgICAqIOWmguaenOaLluaLveeahOe7hOS7tuS4uiBDYXJk77yM5YiZ5bCGIGhvdmVySW5kZXgg6LWL5YC857uZIGl0ZW0g55qEIGluZGV4IOWxnuaAp1xuICAgICAgICovXG4gICAgICBpZiAoaXRlbS5pbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGl0ZW0uaW5kZXggPSBob3ZlckluZGV4O1xuICAgICAgfVxuICAgIH0sXG4gIH0pO1xuXG4gIC8qKlxuICAgKiDkvb/nlKggZHJhZyDlkowgZHJvcCDlr7kgcmVmIOi/m+ihjOWMheijue+8jOWImee7hOS7tuaXouWPr+S7pei/m+ihjOaLluaLveS5n+WPr+S7peaOpeaUtuaLluaLvee7hOS7tlxuICAgKiDkvb/nlKggZHJhZ1ByZXZpZXcg5YyF6KO557uE5Lu277yM5Y+v5Lul5a6e546w5ouW5Yqo5pe26aKE6KeI6K+l57uE5Lu255qE5pWI5p6cXG4gICAqL1xuICBkcmFnUHJldmlldyhkcm9wUmVmKHJlZikpO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdlxuICAgICAgcmVmPXtyZWZ9XG4gICAgICBzdHlsZT17e1xuICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgICAgYmFja2dyb3VuZDogYmcsXG4gICAgICAgIG1hcmdpbjogJzE2cHggNnB4JyxcbiAgICAgICAgLy8gQ2FyZCDkuLrljaDkvY3lhYPntKDmmK/vvIzpgI/mmI7luqYgMC4077yM5ouW5ou954q25oCB5pe26YCP5piO5bqmIDAuMu+8jOato+W4uOaDheWGtemAj+aYjuW6puS4uiAxXG4gICAgICAgIG9wYWNpdHk6IGlkID09PSAtMSA/IDAuNCA6IGlzRHJhZ2dpbmcgPyAwLjIgOiAxLFxuICAgICAgICBwYWRkaW5nOiAnMjBweCAwcHgnLFxuICAgICAgICB2ZXJ0aWNhbEFsaWduOiA0MCxcbiAgICAgICAgd2lkdGg6IDI4OCxcbiAgICAgICAgY3Vyc29yOiAnbW92ZScsXG4gICAgICB9fVxuICAgID5cbiAgICAgIHtpZCAhPT0gLTEgJiZcbiAgICAgICAgZHJhZ1JlZiAmJlxuICAgICAgICBkcmFnUmVmKFxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8Yj7pgInpobk6PC9iPlxuICAgICAgICAgICAge2NhdGVnb3J5fVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgIDwvZGl2PlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFHQTtBQUVBO0FBQUE7QUFBQTtBQVBBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQVNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBdkRBO0FBQUE7QUFBQTtBQTBEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVRBO0FBRkE7QUF3QkE7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///189\n')}}]);